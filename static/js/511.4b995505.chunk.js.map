{"version":3,"file":"static/js/511.4b995505.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/components/LessonsList/LessonsList.module.scss?3333","webpack://react-homework-template/./src/components/LockedMessage/LockedMessage.module.scss?2913","components/LockedMessage/LockedMessage.js","components/LessonsList/LessonsList.js","webpack://react-homework-template/./src/pages/CurrentCourse/CurrentCourse.module.scss?5984","pages/CurrentCourse/CurrentCourse.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"lessons-list\":\"LessonsList_lessons-list__7gLFD\",\"lesson\":\"LessonsList_lesson__Z-4Uc\",\"lesson-number-wrapp\":\"LessonsList_lesson-number-wrapp__s2-02\",\"lesson-number\":\"LessonsList_lesson-number__YgwAy\",\"img-wrapp\":\"LessonsList_img-wrapp__q1Hdu\",\"image\":\"LessonsList_image__t6tpn\"};","// extracted by mini-css-extract-plugin\nexport default {\"locked-message\":\"LockedMessage_locked-message__AsiJ9\"};","import styles from './LockedMessage.module.scss';\n\nexport const LockedMessage = ({ children }) => {\n  return <b className={styles['locked-message']}>{children}</b>;\n};\n","import styles from './LessonsList.module.scss';\nimport { useSearchParams } from 'react-router-dom';\nimport { LockedMessage } from 'components/LockedMessage/LockedMessage';\nimport { Title } from 'components/Title/Title';\n\nexport const LessonsList = ({ lessons, onChangeCurrenLesson }) => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const course = searchParams.get('course');\n\n  return (\n    <ul className={styles['lessons-list']}>\n      {lessons.map(lesson => {\n        const { id, previewImageLink, status, title, order } = lesson;\n        return (\n          <li\n            key={id}\n            className={styles.lesson}\n            onClick={() => {\n              onChangeCurrenLesson(lesson);\n              setSearchParams({ course: course, lesson: order });\n            }}\n          >\n            <p className={styles['lesson-number-wrapp']}>\n              <span className={styles['lesson-number']}>{order}</span>\n            </p>\n            <div>\n              <div className={styles['img-wrapp']}>\n                <img\n                  className={styles.image}\n                  src={`${previewImageLink}/lesson-${order}.webp`}\n                  alt=\"Preview of the lesson\"\n                />{' '}\n                {status === 'locked' && <LockedMessage>Locked</LockedMessage>}\n              </div>\n            </div>\n            <Title tag=\"h3\">{title}</Title>\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"description\":\"CurrentCourse_description__9mAng\",\"video-wrapp\":\"CurrentCourse_video-wrapp__gosmS\",\"video\":\"CurrentCourse_video__xtcYf\"};","import { useParams, useSearchParams } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport throttle from 'lodash.throttle';\nimport { getCourse } from 'API/API';\nimport { useVideoPlayer } from 'hooks/useVideoPlayer';\nimport { Title } from 'components/Title/Title';\nimport { CoursesInfo } from 'components/CoursesInfo/CoursesInfo';\nimport { LessonsList } from 'components/LessonsList/LessonsList';\nimport { LockedMessage } from 'components/LockedMessage/LockedMessage';\nimport { Message } from 'components/Message/Message';\nimport { Loader } from 'components/Loader/Loader';\nimport { useStore } from 'Store/Store';\nimport { VscMultipleWindows } from 'react-icons/vsc';\nimport { ButtonIcon } from 'components/ButtonIcon/ButtonIcon';\nimport styles from './CurrentCourse.module.scss';\n\nconst CurrentCourse = () => {\n  const [course, setCourse] = useState(null);\n  const [currentLesson, setCurrentLesson] = useState(null);\n  const [status, setStatus] = useState('idle');\n\n  const { courseId } = useParams();\n  const [searchParams] = useSearchParams();\n  const currentLessonNumber = searchParams.get('lesson');\n\n  const onOpenModal = useStore(state => state.openModal);\n  const addLessonOnModalVideo = useStore(state => state.addLesson);\n\n  useEffect(() => {\n    const getDataCourse = async () => {\n      setStatus('pending');\n      try {\n        const course = await getCourse(courseId);\n        const sortCourse = [...course.lessons].sort(\n          (a, b) => a.order - b.order\n        );\n        setCourse({ ...course, lessons: [...sortCourse] });\n        setStatus('resolved');\n      } catch (error) {\n        setStatus('rejected');\n        console.log(error.message);\n      }\n    };\n\n    getDataCourse();\n  }, [courseId]);\n\n  useEffect(() => {\n    if (!course) {\n      return;\n    } else if (currentLessonNumber) {\n      setCurrentLesson(course.lessons[Number(currentLessonNumber) - 1]);\n    } else {\n      setCurrentLesson(course.lessons[0]);\n    }\n  }, [course, currentLessonNumber]);\n\n  useEffect(() => {\n    const video = document.getElementById(`${courseId}`);\n    const changeSpeedVideo = e => {\n      if (e.ctrlKey && e.code === 'ArrowUp') {\n        console.log(video?.playbackRate);\n        video.playbackRate += 0.1;\n      } else if (e.ctrlKey && e.code === 'ArrowDown') {\n        video.playbackRate -= 0.1;\n      }\n    };\n\n    window.addEventListener('keydown', changeSpeedVideo);\n    return () => window.removeEventListener('keydown', changeSpeedVideo);\n  }, [courseId]);\n\n  const onStopVideo = () => {\n    const video = document.getElementById(`${courseId}`);\n    video?.pause();\n  };\n\n  const { saveCurrentTimeVideo } = useVideoPlayer(currentLesson);\n\n  return (\n    <>\n      {status === 'resolved' && currentLesson && (\n        <>\n          <div className={styles['video-wrapp']}>\n            <video\n              className={styles.video}\n              id={courseId}\n              controls={currentLesson.status === 'unlocked'}\n              width=\"100%\"\n              poster={`${currentLesson?.previewImageLink}/lesson-${currentLesson.order}.webp`}\n              onTimeUpdate={throttle(e => saveCurrentTimeVideo(e), 1000)}\n            ></video>\n            {currentLesson && currentLesson.status === 'locked' && (\n              <LockedMessage>This video is blocked</LockedMessage>\n            )}\n          </div>\n          <Title tag=\"h2\">\n            {`Current lesson: ${currentLesson.order} - ${currentLesson.title}`}{' '}\n            {currentLesson.status === 'unlocked' && (\n              <ButtonIcon\n                onClick={() => {\n                  onOpenModal();\n                  addLessonOnModalVideo(currentLesson);\n                  onStopVideo();\n                }}\n              >\n                <VscMultipleWindows />\n              </ButtonIcon>\n            )}{' '}\n          </Title>\n          <div>\n            {status === 'resolved' && course && (\n              <Title main>{`Course: ${course.title}`}</Title>\n            )}\n            <CoursesInfo\n              lessonsCount={course.lessons.length}\n              rating={course.rating}\n              metaInfo={course.meta}\n            >\n              <b className={styles.description}>{course.description}</b>\n            </CoursesInfo>\n          </div>\n        </>\n      )}\n      {status === 'resolved' && course && (\n        <LessonsList\n          lessons={course.lessons}\n          onChangeCurrenLesson={setCurrentLesson}\n        />\n      )}\n      {status === 'pending' && <Loader />}\n      {status === 'rejected' && (\n        <Message>Sorry, something went wrong. Try reloading the page</Message>\n      )}\n    </>\n  );\n};\n\nexport default CurrentCourse;\n"],"names":["LockedMessage","children","className","styles","LessonsList","lessons","onChangeCurrenLesson","useSearchParams","searchParams","setSearchParams","course","get","map","lesson","id","previewImageLink","status","title","order","onClick","src","alt","Title","tag","useState","setCourse","currentLesson","setCurrentLesson","setStatus","courseId","useParams","currentLessonNumber","onOpenModal","useStore","state","openModal","addLessonOnModalVideo","addLesson","useEffect","getDataCourse","getCourse","sortCourse","sort","a","b","console","log","message","Number","video","document","getElementById","changeSpeedVideo","e","ctrlKey","code","playbackRate","window","addEventListener","removeEventListener","saveCurrentTimeVideo","useVideoPlayer","controls","width","poster","onTimeUpdate","throttle","ButtonIcon","pause","onStopVideo","main","CoursesInfo","lessonsCount","length","rating","metaInfo","meta","description","Loader","Message"],"sourceRoot":""}